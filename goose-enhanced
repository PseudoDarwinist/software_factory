#!/bin/bash

# Enhanced Goose with Developer Toolkit and Repository Capabilities
export GOOSE_PROVIDER=google
export GOOSE_MODEL=gemini-2.5-flash
export GOOGLE_API_KEY=AIzaSyD_49Jhf8WZ4irHzaK8KqiEHOw-ILQ3Cow
export GOOSE_MODE=auto
export GOOSE_SKIP_USAGE_CHECK=true

# Enable developer toolkit and repository tools
export GOOSE_TOOLKIT=developer
export GOOSE_ENABLE_FILE_TOOLS=true
export GOOSE_ENABLE_GIT_TOOLS=true
export GOOSE_ENABLE_GITHUB_TOOLS=true

# Repository Context
REPO_NAME=$(basename `git rev-parse --show-toplevel` 2>/dev/null || echo "Software_Factory")
BRANCH_NAME=$(git branch --show-current 2>/dev/null || echo "main")
COMMIT_HASH=$(git rev-parse --short HEAD 2>/dev/null || echo "unknown")

echo "ü¶Ü Enhanced Goose with Developer Toolkit"
echo "üéØ Model: $GOOSE_MODEL"
echo "üåê Provider: Google"
echo "üõ†Ô∏è Toolkit: Developer (File, Git, GitHub)"
echo "üìÅ Repository: $REPO_NAME"
echo "üåø Branch: $BRANCH_NAME"
echo "üìù Commit: $COMMIT_HASH"
echo ""

# Check if we're in a git repository and show available tools
if git rev-parse --git-dir > /dev/null 2>&1; then
    echo "‚úÖ Git repository detected - Git tools available"
else
    echo "‚ö†Ô∏è Not in a Git repository - Limited tools available"
fi

echo ""

goose "$@"